{% extends 'base.html' %}

{% block style %}
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/live.css' %}">
    <link rel="stylesheet" href="{% static 'css/btn.css' %}">
{% endblock %}

{% block content %}
<main>
    {% if error %}
        {{error}}
    {% endif %}
    <div class="headerImg" id="participantImg">
        <div class="gradient"></div>
    </div>

    <header class="container gapLarge">
        <div class="wrapper gapLarge headerContent grow">
            <div class="container gapMinimal grow">
                <p class="footnote" id="current_show_label">{{ show }}</p>
                <h2 class="title">
                    <span class="title" id="country_name"></span> (pid: <span class="title" id="performance_id"></span>)
                </h2>
            </div>

            <img class="heart" id="heartImg" src="{% static 'img/hearts/Switzerland.svg' %}" alt="">
        </div>

        <div class="wrapper gapLarge headerContent">
            <p class="footnote grow" id="artist_name"></p>
            <p class="footnote" id="song_name"></p>
        </div>
    </header>
    
    <div class="wrapper scoreboard gridSpan" id="online_list">
        <p class="playerVote" id="online_list_dummy">No users connected.</p>
    </div>

    <section class="container">
            <button class="btn">Stop live</button>
        <button class="btn" id="B_ScoreBoard">Switch to scoreboard</button>
    </section>
    <section class="container hidden" id="scoreBoardMode">
        <div class="votesData" style="display: flex; flex-direction: column; gap: 5px;">
            {% if show != "Grand Final" %}
                {% for performance in forVote %}
                    <div class="voteCard" style="display: flex; justify-content: space-between; gap: 25px;">
                        <label for="vote_{{performance.participant.country}}" class="country" style="width: 100%; display: flex; gap: 25px;">
                            <img {% if performance.passed %} class="auto_qualified" {% endif %} width="20px" src="{% static 'img/hearts/' %}{{ performance.participant.country }}.svg" alt="">
                            <p {% if performance.passed %} class="auto_qualified" {% endif %}>{{performance.participant.country}}</p>
                        </label>
                        <input {% if performance.passed %} class="auto_qualified" checked disabled {% endif %} type="checkbox" name="" id="vote_{{performance.participant.country}}" class="voteResultInput" data-performance="{{ performance.id }}" data-criteria="1">
                    </div>
                {% endfor %}
            {% else %}
            {% endif %}
        </div>
    </section>
    <nav class="wrapper gapLarge">
        
        <button class="btn btnIconOnly" id="live_prev">
            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#fff"><path d="m418.15-480 162.93 162.92q8.3 8.31 8.5 20.89.19 12.57-8.5 21.27-8.7 8.69-21.08 8.69-12.38 0-21.08-8.69L359.15-454.69q-5.61-5.62-7.92-11.85-2.31-6.23-2.31-13.46t2.31-13.46q2.31-6.23 7.92-11.85l179.77-179.77q8.31-8.3 20.89-8.5 12.57-.19 21.27 8.5 8.69 8.7 8.69 21.08 0 12.38-8.69 21.08L418.15-480Z"/></svg>
        </button>
        <button class="wrapper gapSmall btn" id="live_start">
            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#fff"><path d="M148-560q0 59.92 20.65 114.46 20.66 54.54 58.97 99.93 7.46 8.69 7.65 19.42.19 10.73-7.88 18.8-8.08 8.08-19.31 7.39-11.23-.69-18.69-9.39-45-52.46-69.5-116.8-24.5-64.35-24.5-133.81 0-69.46 24.5-133.81 24.5-64.34 69.5-116.8 7.46-8.7 18.69-9.39 11.23-.69 19.31 7.39 8.07 8.07 7.88 18.8-.19 10.73-7.65 19.42-38.31 45.39-58.97 99.93Q148-619.92 148-560Zm132 0q0 33.54 10.15 64.27 10.16 30.73 30.08 57.12 6.85 8.69 7.04 19.92.19 11.23-7.88 19.3-8.08 8.08-18.81 7.7-10.73-.39-17.58-9.08-27-33.46-41.31-74.42-14.3-40.96-14.3-84.81t14.3-84.81Q256-685.77 283-719.23q6.85-8.69 17.58-9.08 10.73-.38 18.81 7.7 8.07 8.07 7.88 19.3-.19 11.23-7.04 19.92-19.92 26.39-30.08 57.12Q280-593.54 280-560Zm170 392.31v-309.54q-26.23-8.92-42.35-31.62-16.11-22.69-16.11-51.15 0-37 25.73-62.73Q443-648.46 480-648.46t62.73 25.73Q568.46-597 568.46-560q0 28.46-16.11 51.15-16.12 22.7-42.35 31.62v309.54q0 12.77-8.62 21.38-8.61 8.62-21.38 8.62t-21.38-8.62q-8.62-8.61-8.62-21.38ZM680-560q0-33.54-10.15-64.27-10.16-30.73-30.08-57.12-6.85-8.69-7.04-19.92-.19-11.23 7.88-19.3 8.08-8.08 18.81-7.7 10.73.39 17.58 9.08 27 33.46 41.31 74.42 14.3 40.96 14.3 84.81t-14.3 84.81Q704-434.23 677-400.77q-6.85 8.69-17.58 9.08-10.73.38-18.81-7.7-8.07-8.07-7.88-19.3.19-11.23 7.04-19.92 19.92-26.39 30.08-57.12Q680-526.46 680-560Zm132 0q0-59.92-20.65-114.46-20.66-54.54-58.97-99.93-7.46-8.69-7.65-19.42-.19-10.73 7.88-18.8 8.08-8.08 19.31-7.39 11.23.69 18.69 9.39 45 52.46 69.5 116.8 24.5 64.35 24.5 133.81 0 69.46-24.5 133.81-24.5 64.34-69.5 116.8-7.46 8.7-18.69 9.39-11.23.69-19.31-7.39-8.07-8.07-7.88-18.8.19-10.73 7.65-19.42 38.31-45.39 58.97-99.93Q812-500.08 812-560Z"/></svg>
            <span id="admin_controller_label">Start Live</span>
        </button>
        <button class="btn btnIconOnly" id="live_next">
            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#fff"><path d="M517.85-480 354.92-642.92q-8.3-8.31-8.5-20.89-.19-12.57 8.5-21.27 8.7-8.69 21.08-8.69 12.38 0 21.08 8.69l179.77 179.77q5.61 5.62 7.92 11.85 2.31 6.23 2.31 13.46t-2.31 13.46q-2.31 6.23-7.92 11.85L397.08-274.92q-8.31 8.3-20.89 8.5-12.57.19-21.27-8.5-8.69-8.7-8.69-21.08 0-12.38 8.69-21.08L517.85-480Z"/></svg>
        </button>

        
    </nav>
    

</main>
{% endblock %}

{% block script %}
    <script type="module" src="{% static 'socket.js' %}"></script>
    <script type="module" src="{% static 'tools_admin.js' %}"></script>
    <script type="module" src="{% static 'tools_shared.js' %}"></script>
    <script id="performances_data" type="application/json">
        {{ performances|safe }}
    </script>
{% endblock %}
